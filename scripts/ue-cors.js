(()=>{var e,t,n,r,o,i,a,s;(t=e||(e={})).Call="call",t.Reply="reply",t.Syn="syn",t.SynAck="synAck",t.Ack="ack",(r=n||(n={})).Fulfilled="fulfilled",r.Rejected="rejected",(i=o||(o={})).ConnectionDestroyed="ConnectionDestroyed",i.ConnectionTimeout="ConnectionTimeout",i.NoIframeSrc="NoIframeSrc",(a||(a={})).DataCloneError="DataCloneError",(s||(s={})).Message="message";const c=({name:e,message:t,stack:n})=>({name:e,message:t,stack:n});var l=(t,r,o)=>{const{localName:i,local:l,remote:u,originForSending:d,originForReceiving:p}=t;let E=!1;const m=t=>{if(t.source!==u||t.data.penpal!==e.Call)return;if("*"!==p&&t.origin!==p)return void o(`${i} received message from origin ${t.origin} which did not match expected origin ${p}`);const s=t.data,{methodName:l,args:m,id:f}=s;o(`${i}: Received ${l}() call`);const g=t=>r=>{if(o(`${i}: Sending ${l}() reply`),E)return void o(`${i}: Unable to send ${l}() reply due to destroyed connection`);const s={penpal:e.Reply,id:f,resolution:t,returnValue:r};t===n.Rejected&&r instanceof Error&&(s.returnValue=c(r),s.returnValueIsError=!0);try{u.postMessage(s,d)}catch(t){if(t.name===a.DataCloneError){const r={penpal:e.Reply,id:f,resolution:n.Rejected,returnValue:c(t),returnValueIsError:!0};u.postMessage(r,d)}throw t}};new Promise((e=>e(r[l].apply(r,m)))).then(g(n.Fulfilled),g(n.Rejected))};return l.addEventListener(s.Message,m),()=>{E=!0,l.removeEventListener(s.Message,m)}};let u=0;const d=e=>e?e.split("."):[],p=(e,t,n)=>{const r=d(t);return r.reduce(((e,t,o)=>(void 0===e[t]&&(e[t]={}),o===r.length-1&&(e[t]=n),e[t])),e),e},E=(e,t)=>{const n={};return Object.keys(e).forEach((r=>{const o=e[r],i=((e,t)=>{const n=d(t||"");return n.push(e),(e=>e.join("."))(n)})(r,t);"object"==typeof o&&Object.assign(n,E(o,i)),"function"==typeof o&&(n[i]=o)})),n},m=e=>{const t={};for(const n in e)p(t,n,e[n]);return t};var f=(t,r,i,a,c)=>{const{localName:l,local:d,remote:p,originForSending:E,originForReceiving:f}=r;let g=!1;c(`${l}: Connecting call sender`);const h=t=>(...r)=>{let i;c(`${l}: Sending ${t}() call`);try{p.closed&&(i=!0)}catch(e){i=!0}if(i&&a(),g){const e=new Error(`Unable to send ${t}() call due to destroyed connection`);throw e.code=o.ConnectionDestroyed,e}return new Promise(((o,i)=>{const a=++u,m=r=>{if(r.source!==p||r.data.penpal!==e.Reply||r.data.id!==a)return;if("*"!==f&&r.origin!==f)return void c(`${l} received message from origin ${r.origin} which did not match expected origin ${f}`);const u=r.data;c(`${l}: Received ${t}() reply`),d.removeEventListener(s.Message,m);let E=u.returnValue;u.returnValueIsError&&(E=(e=>{const t=new Error;return Object.keys(e).forEach((n=>t[n]=e[n])),t})(E)),(u.resolution===n.Fulfilled?o:i)(E)};d.addEventListener(s.Message,m);const g={penpal:e.Call,id:a,methodName:t,args:r};p.postMessage(g,E)}))},y=i.reduce(((e,t)=>(e[t]=h(t),e)),{});return Object.assign(t,m(y)),()=>{g=!0}},g=(e,t)=>{let n;return void 0!==e&&(n=window.setTimeout((()=>{const n=new Error(`Connection timed out after ${e}ms`);n.code=o.ConnectionTimeout,t(n)}),e)),()=>{clearTimeout(n)}},h=(t,n,r,o)=>{const{destroy:i,onDestroy:a}=r;return r=>{if(!(t instanceof RegExp?t.test(r.origin):"*"===t||t===r.origin))return void o(`Child: Handshake - Received SYN-ACK from origin ${r.origin} which did not match expected origin ${t}`);o("Child: Handshake - Received SYN-ACK, responding with ACK");const s="null"===r.origin?"*":r.origin,c={penpal:e.Ack,methodNames:Object.keys(n)};window.parent.postMessage(c,s);const u={localName:"Child",local:window,remote:window.parent,originForSending:s,originForReceiving:r.origin},d=l(u,n,o);a(d);const p={},E=f(p,u,r.data.methodNames,i,o);return a(E),p}},y=(t={})=>{const{parentOrigin:n="*",methods:r={},timeout:o,debug:i=!1}=t,a=(e=>(...t)=>{e&&console.log("[Penpal]",...t)})(i),c=((e,t)=>{const n=[];let r=!1;return{destroy(o){r||(r=!0,t(`${e}: Destroying connection`),n.forEach((e=>{e(o)})))},onDestroy(e){r?e():n.push(e)}}})("Child",a),{destroy:l,onDestroy:u}=c,d=E(r),p=h(n,d,c,a);return{promise:new Promise(((t,r)=>{const i=g(o,l),c=n=>{if((()=>{try{clearTimeout()}catch(e){return!1}return!0})()&&n.source===parent&&n.data&&n.data.penpal===e.SynAck){const e=p(n);e&&(window.removeEventListener(s.Message,c),i(),t(e))}};window.addEventListener(s.Message,c),(()=>{a("Child: Handshake - Sending SYN");const t={penpal:e.Syn},r=n instanceof RegExp?"*":n;window.parent.postMessage(t,r)})(),u((e=>{window.removeEventListener(s.Message,c),e&&r(e)}))})),destroy(){l()}}},R={},T=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const P=[];for(let e=0;e<256;++e)P.push((e+256).toString(16).slice(1));var v=function(e){if(!function(e){return"string"==typeof e&&T.test(e)}(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function A(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function b(e,t){return e<<t|e>>>32-t}var _=function(e,t,n){function r(e,t,n,r){var o;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof t&&(t=v(t)),16!==(null===(o=t)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(t),i.set(e,t.length),i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,o=Math.ceil(r/16),i=new Array(o);for(let t=0;t<o;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];i[t]=n}i[o-1][14]=8*(e.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=i[e][t];for(let e=16;e<80;++e)r[e]=b(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let o=n[0],a=n[1],s=n[2],c=n[3],l=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),i=b(o,5)+A(n,a,s,c)+l+t[n]+r[e]>>>0;l=c,c=s,s=b(a,30)>>>0,a=o,o=i}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+s>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+l>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}(i),i[6]=15&i[6]|80,i[8]=63&i[8]|128,n){r=r||0;for(let e=0;e<16;++e)n[r+e]=i[e];return n}return function(e,t=0){return(P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]).toLowerCase()}(i)}try{r.name="v5"}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}();function O(e,t){return Object.keys(t).forEach((function(n){"default"===n||"__esModule"===n||e.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}function w(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}w(R,"Constants",(()=>x));var I,L,S={},C={};w(C,"EDITABLE_ATTRS_REACT",(()=>I)),w(C,"EDITABLE_ATTRS",(()=>M)),w(C,"REMOTE_APP_MODES",(()=>D)),(L=I||(I={})).ID="itemID",L.TYPE="itemType",L.SCOPE="itemScope",L.PROP="itemProp";const M={UUID:"id",ID:I.ID.toLowerCase(),TYPE:I.TYPE.toLowerCase(),SCOPE:I.SCOPE.toLowerCase(),PROP:I.PROP.toLowerCase(),PARENTID:"parentid",EDITOR_BEHAVIOR:"data-editor-behavior"};var D,N;(N=D||(D={})).EDIT="edit",N.PREVIEW="preview",O(S,{}),O(S,C);const U="universal-editor-message-bus.herokuapp.com",$="/gql",H="urn:adobe:aem:editor:",G="urn:auecon:",x={USER_INPUT_RELAY_MESSAGE:"REMOTE_APP_USER_INPUT",OVERLAY_INPUT_MESSAGE:"OVERLAY_INPUT_MESSAGE",DEMO_APP_HOST:"ue-remote-app.adobe.net/?authorHost=https://author-p15902-e145656-cmstg.adobeaemcloud.com&publishHost=https://publish-p15902-e145656-cmstg.adobeaemcloud.com",GRAPHQL_HOST:U,GRAPHQL_PORT_PUBLIC:443,GRAPHQL_PORT_LOCAL:4e3,GRAPHQL_PATH:$,GRAPHQL_URL:`${U}:443${$}`,EDITABLE_SELECTOR:`[${M.TYPE}]`,CANVAS_PATH:"/canvas",PARENT_SELECTOR:`[${M.SCOPE}][${M.ID}]`,URN_PREFIX:H,DEPRECATED_URN_PREFIX:G,META_SELECTOR:`meta[name^='${H}'],meta[name^='${G}']`,DEMO_APP_HOST_PROD:"ue-remote-app.adobe.net",FRAGMENT_TYPE:"reference",UNIFIED_SHELL_STAGE:"https://experience-stage.adobe.com",UNIFIED_SHELL_PROD:"https://experience.adobe.com",HEADLESS_CF_EDITOR_URL:"#/aem/cf/editor/editor",CONTAINER_SELECTOR:`[${M.TYPE}=container]`,COMPONENT_ITEM_TYPE:"component",TRANSPARENT_BACKGROUND:"rgba(0, 0, 0, 0)",TARGET_ORIGIN:"*",MOUNT_POINT_TYPE:{GOOGLE:"google",ONEDRIVE:"onedrive"}};var V={};w(V,"getMessageBusEndpoint",(()=>F)),w(V,"getDetailsFromPath",(()=>k)),w(V,"obfuscateChannel",(()=>Y)),w(V,"getMountPointConfig",(()=>B));const Y=({channel:e,broadcast:t})=>{let n=e.replace(new RegExp(`(^${x.CANVAS_PATH}/|/*$)`,"g"),"");return t&&(n=n.replace(/\/.*/,"")),_(n,_.URL)},F=e=>{const t=Y({channel:e}),n=Y({channel:e,broadcast:!0});return{channel:t,broadcast:n,endpoint:`https://${x.GRAPHQL_URL}/${t}.${n}`}},k=({path:e})=>{const[t,n]=e.replace(new RegExp(`^${x.GRAPHQL_PATH}/`),"").replace(/\/.*/,"").split(".");return{channel:t,broadcast:n||""}},B=async e=>{const t=new URL(e),n=new URL(`${t.origin}/helix-config.json`),r=await(await fetch(n.toString())).json();let o,i="",a="";if(r&&r.fstab&&r.fstab.data){const e=r.fstab.data.mountpoints["/"];o=new URL(e),a=(e=>{if(e.startsWith("https://drive.google.com/")||e.startsWith("gdrive:"))return x.MOUNT_POINT_TYPE.GOOGLE;if(/https:\/\/.*\.sharepoint\.com/.test(e)||e.startsWith("https://1drv.ms/")||e.startsWith("onedrive:"))return x.MOUNT_POINT_TYPE.ONEDRIVE;throw Error(`Unexpected mountpoint, unknown type: ${e}`)})(e);const t=o.pathname.split("/");i=t.pop()||"",i||(i=t.pop()||"")}return{rootId:i,type:a,url:(null==o?void 0:o.toString())||""}};var j;function K(e,t,n){var r,o,i,a,s;function c(){var l=Date.now()-a;l<t&&l>=0?r=setTimeout(c,t-l):(r=null,n||(s=e.apply(i,o),i=o=null))}null==t&&(t=100);var l=function(){i=this,o=arguments,a=Date.now();var l=n&&!r;return r||(r=setTimeout(c,t)),l&&(s=e.apply(i,o),i=o=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=e.apply(i,o),i=o=null,clearTimeout(r),r=null)},l}O(R,S),O(R,V),K.debounce=K,j=K;var q=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Q=[];for(let e=0;e<256;++e)Q.push((e+256).toString(16).slice(1));var W=function(e){if(!function(e){return"string"==typeof e&&q.test(e)}(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function z(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function X(e,t){return e<<t|e>>>32-t}var Z,J=function(e,t,n){function r(e,t,n,r){var o;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof t&&(t=W(t)),16!==(null===(o=t)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(t),i.set(e,t.length),i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,o=Math.ceil(r/16),i=new Array(o);for(let t=0;t<o;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];i[t]=n}i[o-1][14]=8*(e.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=i[e][t];for(let e=16;e<80;++e)r[e]=X(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let o=n[0],a=n[1],s=n[2],c=n[3],l=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),i=X(o,5)+z(n,a,s,c)+l+t[n]+r[e]>>>0;l=c,c=s,s=X(a,30)>>>0,a=o,o=i}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+s>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+l>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}(i),i[6]=15&i[6]|80,i[8]=63&i[8]|128,n){r=r||0;for(let e=0;e<16;++e)n[r+e]=i[e];return n}return function(e,t=0){return(Q[e[t+0]]+Q[e[t+1]]+Q[e[t+2]]+Q[e[t+3]]+"-"+Q[e[t+4]]+Q[e[t+5]]+"-"+Q[e[t+6]]+Q[e[t+7]]+"-"+Q[e[t+8]]+Q[e[t+9]]+"-"+Q[e[t+10]]+Q[e[t+11]]+Q[e[t+12]]+Q[e[t+13]]+Q[e[t+14]]+Q[e[t+15]]).toLowerCase()}(i)}try{r.name="v5"}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}();!function(e){e.ID="itemID",e.TYPE="itemType",e.SCOPE="itemScope",e.PROP="itemProp"}(Z||(Z={}));const ee={UUID:"id",ID:Z.ID.toLowerCase(),TYPE:Z.TYPE.toLowerCase(),SCOPE:Z.SCOPE.toLowerCase(),PROP:Z.PROP.toLowerCase(),PARENTID:"parentid",EDITOR_BEHAVIOR:"data-editor-behavior"};var te;!function(e){e.EDIT="edit",e.PREVIEW="preview"}(te||(te={}));const ne="universal-editor-message-bus.herokuapp.com",re="/gql",oe="urn:adobe:aem:editor:",ie="urn:auecon:",ae={USER_INPUT_RELAY_MESSAGE:"REMOTE_APP_USER_INPUT",OVERLAY_INPUT_MESSAGE:"OVERLAY_INPUT_MESSAGE",DEMO_APP_HOST:"ue-remote-app.adobe.net/?authorHost=https://author-p15902-e145656-cmstg.adobeaemcloud.com&publishHost=https://publish-p15902-e145656-cmstg.adobeaemcloud.com",GRAPHQL_HOST:ne,GRAPHQL_PORT_PUBLIC:443,GRAPHQL_PORT_LOCAL:4e3,GRAPHQL_PATH:re,GRAPHQL_URL:`${ne}:443${re}`,EDITABLE_SELECTOR:`[${ee.TYPE}]`,CANVAS_PATH:"/canvas",PARENT_SELECTOR:`[${ee.SCOPE}][${ee.ID}]`,URN_PREFIX:oe,DEPRECATED_URN_PREFIX:ie,META_SELECTOR:`meta[name^='${oe}'],meta[name^='${ie}']`,DEMO_APP_HOST_PROD:"ue-remote-app.adobe.net",FRAGMENT_TYPE:"reference",UNIFIED_SHELL_STAGE:"https://experience-stage.adobe.com",UNIFIED_SHELL_PROD:"https://experience.adobe.com",HEADLESS_CF_EDITOR_URL:"#/aem/cf/editor/editor",CONTAINER_SELECTOR:`[${ee.TYPE}=container]`,COMPONENT_ITEM_TYPE:"component",TRANSPARENT_BACKGROUND:"rgba(0, 0, 0, 0)",TARGET_ORIGIN:"*",MOUNT_POINT_TYPE:{GOOGLE:"google",ONEDRIVE:"onedrive"}};var se=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const ce=[];for(let e=0;e<256;++e)ce.push((e+256).toString(16).slice(1));var le=function(e){if(!function(e){return"string"==typeof e&&se.test(e)}(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function ue(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function de(e,t){return e<<t|e>>>32-t}!function(e,t,n){function r(e,t,n,r){var o;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof t&&(t=le(t)),16!==(null===(o=t)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+e.length);if(i.set(t),i.set(e,t.length),i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,o=Math.ceil(r/16),i=new Array(o);for(let t=0;t<o;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];i[t]=n}i[o-1][14]=8*(e.length-1)/Math.pow(2,32),i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=i[e][t];for(let e=16;e<80;++e)r[e]=de(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let o=n[0],a=n[1],s=n[2],c=n[3],l=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),i=de(o,5)+ue(n,a,s,c)+l+t[n]+r[e]>>>0;l=c,c=s,s=de(a,30)>>>0,a=o,o=i}n[0]=n[0]+o>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+s>>>0,n[3]=n[3]+c>>>0,n[4]=n[4]+l>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}(i),i[6]=15&i[6]|80,i[8]=63&i[8]|128,n){r=r||0;for(let e=0;e<16;++e)n[r+e]=i[e];return n}return function(e,t=0){return(ce[e[t+0]]+ce[e[t+1]]+ce[e[t+2]]+ce[e[t+3]]+"-"+ce[e[t+4]]+ce[e[t+5]]+"-"+ce[e[t+6]]+ce[e[t+7]]+"-"+ce[e[t+8]]+ce[e[t+9]]+"-"+ce[e[t+10]]+ce[e[t+11]]+ce[e[t+12]]+ce[e[t+13]]+ce[e[t+14]]+ce[e[t+15]]).toLowerCase()}(i)}try{r.name="v5"}catch(e){}r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"}();const pe={element:window.document},Ee=150,me="Component",fe=e=>{const t=window.getComputedStyle(e).backgroundColor,n=e.parentElement;return t===ae.TRANSPARENT_BACKGROUND&&n?fe(n):t},ge=e=>{if(!(e&&e instanceof HTMLElement))return;const t=window.getComputedStyle(e);return{content:e.innerText,htmlContent:e.innerHTML,style:{font:t.getPropertyValue("font"),visibility:e.style.visibility,color:t.getPropertyValue("color"),textAlign:t.getPropertyValue("text-align"),textTransform:t.getPropertyValue("text-transform"),border:t.getPropertyValue("border"),padding:t.getPropertyValue("padding"),backgroundColor:fe(e),width:t.getPropertyValue("width"),height:t.getPropertyValue("height")}}},he=e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();const t={pageHeight:document.documentElement.scrollHeight,pageYOffset:window.pageYOffset,type:e.type,x:null,y:null,keyModifiers:{advancedSelect:e.ctrlKey,multiSelect:e.shiftKey,metaKey:e.metaKey},editables:[]};"scroll"!==e.type&&(t.x=e.x,t.y=e.y,t.editables=document.elementsFromPoint(e.x,e.y).filter((e=>e.matches(ae.EDITABLE_SELECTOR))).map((e=>{const t=ge(e),n=ve(e);return{content:(null==t?void 0:t.content)||"",htmlContent:(null==t?void 0:t.htmlContent)||"",style:(null==t?void 0:t.style)||{},...n}}))),parent.postMessage({type:ae.OVERLAY_INPUT_MESSAGE,payload:t},ae.TARGET_ORIGIN)},ye=e=>he(e),Re="OverlayBlockingElement",Te=()=>{document.removeEventListener("scroll",ye),document.removeEventListener("mousemove",he),document.removeEventListener("mousedown",he),document.removeEventListener("mouseup",he),document.removeEventListener("click",he);const e=document.getElementById(Re);e&&e.remove()},Pe=e=>{const t=e.closest(ae.PARENT_SELECTOR);return(null==t?void 0:t.getAttribute(ee.ID))||""},ve=e=>{const t=e.getAttribute(ee.TYPE)||"",n=e.getAttribute(ee.ID)||void 0,r=e.getAttribute(ee.PROP)||void 0,{parentid:o,selector:i,isComponent:a}=((e,{itemid:t,itemtype:n,itemprop:r})=>{const o=n===ae.COMPONENT_ITEM_TYPE||e.getAttribute(ee.EDITOR_BEHAVIOR)===ae.COMPONENT_ITEM_TYPE;let i="",a="";if(t)i=`[${ee.ID}="${t}"]`,a=(e=>{var t;const n=null===(t=e.parentElement)||void 0===t?void 0:t.closest(ae.CONTAINER_SELECTOR),r=null==n?void 0:n.getAttribute(ee.ID);if(r)return J(`${r}`,J.URL);const o=null==n?void 0:n.getAttribute(ee.PROP),i=n&&Pe(n);return o&&i?J(`${i}_${o}`,J.URL):""})(e)||"";else{const t=Pe(e);a=J(`${t}`,J.URL),i=`[${ee.ID}="${t}"] ${e.tagName.toLocaleLowerCase()}[${ee.TYPE}="${n}"]`,r&&(i+=`[${ee.PROP}="${r}"]`)}return{parentid:a,selector:i,isComponent:o}})(e,{itemid:n,itemtype:t,itemprop:r}),s=ge(e),c=J(`${n||o}${r?`_${r}`:""}`,J.URL),l=t||me;let u={rect:e.getBoundingClientRect(),itemtype:t,label:l,id:c,itemid:n,itemprop:r,parentid:o,selector:i,pageYOffset:window.pageYOffset,isComponent:a};return["text","richtext"].includes(t)&&(u={...u,...s}),u},Ae={viewport:{width:0,height:0},frame:{width:0,height:0},scroll:{x:0,y:0}},be=({editor:e})=>{null==e||e.updateFrameDetails({details:Ae})},_e=({target:e})=>{const t=e.documentElement;Ae.scroll.x=t.scrollLeft,Ae.scroll.y=t.scrollTop},Oe=({target:e})=>{const t=Math.max(e.document.documentElement.clientWidth||0,e.innerWidth||0),n=Math.max(e.document.documentElement.clientHeight||0,e.innerHeight||0),{width:r,height:o}=e.document.documentElement.getBoundingClientRect();Ae.viewport={width:t,height:n},Ae.frame={width:Math.ceil(r),height:Math.ceil(o)}},we=({editor:e})=>{const t=[];[...document.styleSheets].forEach((e=>{try{const{cssRules:n}=e;[...n].find((e=>e instanceof CSSFontFaceRule))&&e.href&&t.push(e.href)}catch(n){e.href&&t.push(e.href)}})),e.addCustomFonts(t)},Ie=({editor:e})=>{const t=pe.element,n=(0,j.debounce)((()=>{const n=(e=>{const{scrollLeft:t,scrollTop:n}=e.documentElement,r=e.querySelectorAll(ae.EDITABLE_SELECTOR)||[],o=new Map;return r.forEach((e=>{const t=ve(e),n=o.get(t.id);if(o.set(t.id,{...t,children:(null==n?void 0:n.children)||[]}),t.parentid){const e=o.get(t.parentid);e?e.children.push(t.id):o.set(e.id,{children:[t.id]})}})),{editables:o,offset:{x:t,y:n},selected:{}}})(t);e.repaintEditables({editables:n})}),Ee);n(),window.removeEventListener("resize",n),window.addEventListener("resize",n),(({element:e,callback:t})=>{const n=new MutationObserver(t);n.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),n.disconnect})({element:t,callback:n})},Le=({editor:e})=>{const t=window;t.document.addEventListener("scroll",(0,j.debounce)((({target:t})=>{_e({target:t}),be({editor:e})}),Ee)),t.addEventListener("resize",(0,j.debounce)((({target:t})=>{Oe({target:t}),be({editor:e})}),Ee)),t.addEventListener("orientationchange",(0,j.debounce)((({target:n})=>{_e({target:t.document}),Oe({target:n}),be({editor:e})}),Ee));const n=(0,j.debounce)((()=>{Oe({target:t}),be({editor:e})}),Ee);new ResizeObserver(n).observe(t.document.body),requestAnimationFrame((()=>{_e({target:t.document}),Oe({target:t}),be({editor:e})}))},Se=({editor:e})=>{document.addEventListener("click",(t=>(({event:e,editor:t})=>{const n=e.target.closest("A");n&&(e.preventDefault(),t.navigateTo({href:n.href}))})({event:t,editor:e})),{capture:!0})},Ce=()=>{window.addEventListener("keydown",(({type:e,key:t,altKey:n,metaKey:r,shiftKey:o,ctrlKey:i})=>{const a={type:e,key:t,altKey:n,metaKey:r,shiftKey:o,ctrlKey:i};parent.postMessage({type:ae.USER_INPUT_RELAY_MESSAGE,value:a},"*")}))},Me=e=>e.split("/").pop()||"",De=e=>{const[t="",n=""]=e.split("/");return`${n.toUpperCase()} ${t}`},Ne=e=>{const{naturalWidth:t,naturalHeight:n}=e;return t&&n&&`${t} x ${n}`||""},Ue=e=>{const t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,t)).toFixed(0))} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`},$e=Object.freeze({edit:"adobe-ue-edit",preview:"adobe-ue-preview"});var He;He=function(e){return function(t,n,r){var o=r.subscribe;return r.subscribe=function(e,t,n){var i=e;if(t){var a=(null==n?void 0:n.equalityFn)||Object.is,s=e(r.getState());i=function(n){var r=e(n);if(!a(s,r)){var o=s;t(s=r,o)}},null!=n&&n.fireImmediately&&t(s,s)}return o(i)},e(t,n,r)}};var Ge=function(e){var t,n=new Set,r=function(e,r){var o="function"==typeof e?e(t):e;if(!Object.is(o,t)){var i=t;t=(null!=r?r:"object"!=typeof o)?o:Object.assign({},t,o),n.forEach((function(e){return e(t,i)}))}},o=function(){return t},i={setState:r,getState:o,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){return n.clear()}};return t=e(r,o,i),i};const xe=({set:e},{mode:t})=>{e((e=>{const n=t===R.REMOTE_APP_MODES.EDIT||t===R.REMOTE_APP_MODES.PREVIEW;return{...e,mode:t,isInEditor:n}}))},Ve=function(e){return e&&e.__esModule?e.default:e}((function(e){return e?Ge(e):Ge}))(He(((e,t)=>({mode:null,isInEditor:!1,setMode:xe.bind(null,{get:t,set:e})})))),Ye=({selector:e,classNames:t,operation:n="toggle"})=>{const r=document.querySelector(e);if(r)for(const e of t)r.classList[n](e)},Fe=new RegExp(`^${R.Constants.URN_PREFIX}|^${R.Constants.DEPRECATED_URN_PREFIX}`),ke={updateAppMode:e=>{if(!e)return;const{mode:t,setMode:n}=Ve.getState();if(t){if(t===e)return;Ye({selector:"html",classNames:Object.values($e)})}else Ye({selector:"html",classNames:[$e[e]]});n({mode:e})},getEditableElement:e=>{const t=document.querySelector(e);return t&&t instanceof HTMLElement?ge(t):void 0},updateField:async({selector:e,value:t})=>{const n=document.querySelector(e);return"image"===(null==n?void 0:n.getAttribute("itemtype"))&&(n.src=t),"text"===(null==n?void 0:n.getAttribute("itemtype"))&&(n.innerHTML=t),!0},removeField:({selector:e})=>{const t=document.querySelector(e);t&&t.remove()},getUrnMappings:()=>{const e=document.querySelectorAll(R.Constants.META_SELECTOR);return Array.from(e).reduce(((e,{name:t,content:n})=>({...e,[t.replace(Fe,"")]:n})),{})},getMediaProperties:async e=>{const t=document.querySelector(e),n=null==t?void 0:t.getAttribute("src");if(!n||!t)return;const r=await(async e=>{try{return await fetch(e).then((e=>e.blob()))}catch{return}})(n),{type:o,size:i}=r||{};return{name:Me(n),mimeType:o?De(o):"",resolution:Ne(t),size:i?Ue(i):"",src:n,alt:t.getAttribute("alt")||""}},scrollEditableIntoView:e=>{const t=document.querySelector(e);if(t){const e=t.getBoundingClientRect();!(e.top>=0&&e.bottom<=window.innerHeight)&&t.scrollIntoView({behavior:"smooth"})}},toggleEditableVisibility:(e,t)=>{const n=document.querySelector(e);n&&(t?n.style.removeProperty("color"):n.style.color="rgba(0, 0, 0, 0)")},getRichTextColors:e=>{const t=document.querySelector(e),n=[];if("richtext"===t.getAttribute("itemtype"))for(const e of t.children){const t=window.getComputedStyle(e).color;n.push(t)}return n},getMountPointConfig:R.getMountPointConfig};(async()=>{const e=y({methods:ke}),t=await e.promise;var n;we({editor:t}),Ie({editor:t}),Le({editor:t}),Se({editor:t}),Ce(),n=e=>{e===R.REMOTE_APP_MODES.PREVIEW&&Te(),e===R.REMOTE_APP_MODES.EDIT&&(Te(),(()=>{const e=document.createElement("div");e.id=Re,e.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2147483647;",document.body.appendChild(e)})(),document.addEventListener("scroll",ye),document.addEventListener("mousemove",he),document.addEventListener("mousedown",he),document.addEventListener("mouseup",he),document.addEventListener("click",he))},Ve.subscribe((e=>[e.mode]),(([e],[t])=>{e!==t&&n(e)}))})()})();
